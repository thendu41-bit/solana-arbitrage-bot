var an=Object.defineProperty,un=Object.defineProperties;var cn=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var wt=(e,t,n)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q=(e,t)=>{for(var n in t||(t={}))Tt.call(t,n)&&wt(e,n,t[n]);if(Ce)for(var n of Ce(t))xt.call(t,n)&&wt(e,n,t[n]);return e},re=(e,t)=>un(e,cn(t));var Qe=(e,t)=>{var n={};for(var r in e)Tt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ce)for(var r of Ce(e))t.indexOf(r)<0&&xt.call(e,r)&&(n[r]=e[r]);return n};import{PublicKey as Se}from"@solana/web3.js";import ke from"bn.js";var me=9e15,ae=1e9,Ze="0123456789abcdef",Me="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Re="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ze={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-me,maxE:me,crypto:!1},St,X,w=!0,ve="[DecimalError] ",se=ve+"Invalid argument: ",It=ve+"Precision limit exceeded",Lt=ve+"crypto unavailable",Bt="[object Decimal]",F=Math.floor,M=Math.pow,ln=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,mn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,pn=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Nt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,H=1e7,b=7,fn=9007199254740991,dn=Me.length-1,Xe=Re.length-1,f={toStringTag:Bt};f.absoluteValue=f.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),h(e)};f.ceil=function(){return h(new this.constructor(this),this.e+1,2)};f.clampedTo=f.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(se+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};f.comparedTo=f.cmp=function(e){var t,n,r,i,o=this,s=o.d,u=(e=new o.constructor(e)).d,c=o.s,a=e.s;if(!s||!u)return!c||!a?NaN:c!==a?c:s===u?0:!s^c<0?1:-1;if(!s[0]||!u[0])return s[0]?c:u[0]?-a:0;if(c!==a)return c;if(o.e!==e.e)return o.e>e.e^c<0?1:-1;for(r=s.length,i=u.length,t=0,n=r<i?r:i;t<n;++t)if(s[t]!==u[t])return s[t]>u[t]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1};f.cosine=f.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+b,r.rounding=1,n=gn(r,_t(r,n)),r.precision=e,r.rounding=t,h(X==2||X==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};f.cubeRoot=f.cbrt=function(){var e,t,n,r,i,o,s,u,c,a,l=this,m=l.constructor;if(!l.isFinite()||l.isZero())return new m(l);for(w=!1,o=l.s*M(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=v(l.d),e=l.e,(o=(e-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=M(n,1/3),e=F((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?n="5e"+e:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new m(n),r.s=l.s):r=new m(o.toString()),s=(e=m.precision)+3;;)if(u=r,c=u.times(u).times(u),a=c.plus(l),r=L(a.plus(l).times(u),a.plus(c),s+2,1),v(u.d).slice(0,s)===(n=v(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!i&&n=="4999"){if(!i&&(h(u,e+1,0),u.times(u).times(u).eq(l))){r=u;break}s+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(h(r,e+1,1),t=!r.times(r).times(r).eq(l));break}return w=!0,h(r,e,m.rounding,t)};f.decimalPlaces=f.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-F(this.e/b))*b,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};f.dividedBy=f.div=function(e){return L(this,new this.constructor(e))};f.dividedToIntegerBy=f.divToInt=function(e){var t=this,n=t.constructor;return h(L(t,new n(e),0,1,1),n.precision,n.rounding)};f.equals=f.eq=function(e){return this.cmp(e)===0};f.floor=function(){return h(new this.constructor(this),this.e+1,3)};f.greaterThan=f.gt=function(e){return this.cmp(e)>0};f.greaterThanOrEqualTo=f.gte=function(e){var t=this.cmp(e);return t==1||t===0};f.hyperbolicCosine=f.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,u=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return u;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,i=o.d.length,i<32?(e=Math.ceil(i/3),t=(1/Oe(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=pe(s,1,o.times(t),new s(1),!0);for(var c,a=e,l=new s(8);a--;)c=o.times(o),o=u.minus(c.times(l.minus(c.times(l))));return h(o,s.precision=n,s.rounding=r,!0)};f.hyperbolicSine=f.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,r=i.d.length,r<3)i=pe(o,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/Oe(5,e)),i=pe(o,2,i,i,!0);for(var s,u=new o(5),c=new o(16),a=new o(20);e--;)s=i.times(i),i=i.times(u.plus(s.times(c.times(s).plus(a))))}return o.precision=t,o.rounding=n,h(i,t,n,!0)};f.hyperbolicTangent=f.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,L(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};f.inverseCosine=f.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return r!==-1?r===0?t.isNeg()?G(n,i,o):new n(0):new n(NaN):t.isZero()?G(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=G(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))};f.inverseHyperbolicCosine=f.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,w=!1,n=n.times(n).minus(1).sqrt().plus(n),w=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};f.inverseHyperbolicSine=f.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,w=!1,n=n.times(n).plus(1).sqrt().plus(n),w=!0,r.precision=e,r.rounding=t,n.ln())};f.inverseHyperbolicTangent=f.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?h(new o(i),e,t,!0):(o.precision=n=r-i.e,i=L(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)};f.inverseSine=f.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,t!==-1?t===0?(e=G(o,n+4,r).times(.5),e.s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))};f.inverseTangent=f.atan=function(){var e,t,n,r,i,o,s,u,c,a=this,l=a.constructor,m=l.precision,p=l.rounding;if(a.isFinite()){if(a.isZero())return new l(a);if(a.abs().eq(1)&&m+4<=Xe)return s=G(l,m+4,p).times(.25),s.s=a.s,s}else{if(!a.s)return new l(NaN);if(m+4<=Xe)return s=G(l,m+4,p).times(.5),s.s=a.s,s}for(l.precision=u=m+10,l.rounding=1,n=Math.min(28,u/b+2|0),e=n;e;--e)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(w=!1,t=Math.ceil(u/b),r=1,c=a.times(a),s=new l(a),i=a;e!==-1;)if(i=i.times(c),o=s.minus(i.div(r+=2)),i=i.times(c),s=o.plus(i.div(r+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),w=!0,h(s,l.precision=m,l.rounding=p,!0)};f.isFinite=function(){return!!this.d};f.isInteger=f.isInt=function(){return!!this.d&&F(this.e/b)>this.d.length-2};f.isNaN=function(){return!this.s};f.isNegative=f.isNeg=function(){return this.s<0};f.isPositive=f.isPos=function(){return this.s>0};f.isZero=function(){return!!this.d&&this.d[0]===0};f.lessThan=f.lt=function(e){return this.cmp(e)<0};f.lessThanOrEqualTo=f.lte=function(e){return this.cmp(e)<1};f.logarithm=f.log=function(e){var t,n,r,i,o,s,u,c,a=this,l=a.constructor,m=l.precision,p=l.rounding,g=5;if(e==null)e=new l(10),t=!0;else{if(e=new l(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=a.d,a.s<0||!n||!n[0]||a.eq(1))return new l(n&&!n[0]?-1/0:a.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10===0;)i/=10;o=i!==1}if(w=!1,u=m+g,s=oe(a,u),r=t?_e(l,u+10):oe(e,u),c=L(s,r,u,1),he(c.d,i=m,p))do if(u+=10,s=oe(a,u),r=t?_e(l,u+10):oe(e,u),c=L(s,r,u,1),!o){+v(c.d).slice(i+1,i+15)+1==1e14&&(c=h(c,m+1,0));break}while(he(c.d,i+=10,p));return w=!0,h(c,m,p)};f.minus=f.sub=function(e){var t,n,r,i,o,s,u,c,a,l,m,p,g=this,A=g.constructor;if(e=new A(e),!g.d||!e.d)return!g.s||!e.s?e=new A(NaN):g.d?e.s=-e.s:e=new A(e.d||g.s!==e.s?g:NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(a=g.d,p=e.d,u=A.precision,c=A.rounding,!a[0]||!p[0]){if(p[0])e.s=-e.s;else if(a[0])e=new A(g);else return new A(c===3?-0:0);return w?h(e,u,c):e}if(n=F(e.e/b),l=F(g.e/b),a=a.slice(),o=l-n,o){for(m=o<0,m?(t=a,o=-o,s=p.length):(t=p,n=l,s=a.length),r=Math.max(Math.ceil(u/b),s)+2,o>r&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for(r=a.length,s=p.length,m=r<s,m&&(s=r),r=0;r<s;r++)if(a[r]!=p[r]){m=a[r]<p[r];break}o=0}for(m&&(t=a,a=p,p=t,e.s=-e.s),s=a.length,r=p.length-s;r>0;--r)a[s++]=0;for(r=p.length;r>o;){if(a[--r]<p[r]){for(i=r;i&&a[--i]===0;)a[i]=H-1;--a[i],a[r]+=H}a[r]-=p[r]}for(;a[--s]===0;)a.pop();for(;a[0]===0;a.shift())--n;return a[0]?(e.d=a,e.e=De(a,n),w?h(e,u,c):e):new A(c===3?-0:0)};f.modulo=f.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?h(new r(n),r.precision,r.rounding):(w=!1,r.modulo==9?(t=L(n,e.abs(),0,3,1),t.s*=e.s):t=L(n,e,0,r.modulo,1),t=t.times(e),w=!0,n.minus(t))};f.naturalExponential=f.exp=function(){return Ye(this)};f.naturalLogarithm=f.ln=function(){return oe(this)};f.negated=f.neg=function(){var e=new this.constructor(this);return e.s=-e.s,h(e)};f.plus=f.add=function(e){var t,n,r,i,o,s,u,c,a,l,m=this,p=m.constructor;if(e=new p(e),!m.d||!e.d)return!m.s||!e.s?e=new p(NaN):m.d||(e=new p(e.d||m.s===e.s?m:NaN)),e;if(m.s!=e.s)return e.s=-e.s,m.minus(e);if(a=m.d,l=e.d,u=p.precision,c=p.rounding,!a[0]||!l[0])return l[0]||(e=new p(m)),w?h(e,u,c):e;if(o=F(m.e/b),r=F(e.e/b),a=a.slice(),i=o-r,i){for(i<0?(n=a,i=-i,s=l.length):(n=l,r=o,s=a.length),o=Math.ceil(u/b),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=a.length,i=l.length,s-i<0&&(i=s,n=l,l=a,a=n),t=0;i;)t=(a[--i]=a[i]+l[i]+t)/H|0,a[i]%=H;for(t&&(a.unshift(t),++r),s=a.length;a[--s]==0;)a.pop();return e.d=a,e.e=De(a,r),w?h(e,u,c):e};f.precision=f.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(se+e);return n.d?(t=Ct(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};f.round=function(){var e=this,t=e.constructor;return h(new t(e),e.e+1,t.rounding)};f.sine=f.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+b,r.rounding=1,n=bn(r,_t(r,n)),r.precision=e,r.rounding=t,h(X>2?n.neg():n,e,t,!0)):new r(NaN)};f.squareRoot=f.sqrt=function(){var e,t,n,r,i,o,s=this,u=s.d,c=s.e,a=s.s,l=s.constructor;if(a!==1||!u||!u[0])return new l(!a||a<0&&(!u||u[0])?NaN:u?s:1/0);for(w=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=v(u),(t.length+c)%2==0&&(t+="0"),a=Math.sqrt(t),c=F((c+1)/2)-(c<0||c%2),a==1/0?t="5e"+c:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),r=new l(t)):r=new l(a.toString()),n=(c=l.precision)+3;;)if(o=r,r=o.plus(L(s,o,n+2,1)).times(.5),v(o.d).slice(0,n)===(t=v(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(h(o,c+1,0),o.times(o).eq(s))){r=o;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(h(r,c+1,1),e=!r.times(r).eq(s));break}return w=!0,h(r,c,l.rounding,e)};f.tangent=f.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=L(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,h(X==2||X==4?n.neg():n,e,t,!0)):new r(NaN)};f.times=f.mul=function(e){var t,n,r,i,o,s,u,c,a,l=this,m=l.constructor,p=l.d,g=(e=new m(e)).d;if(e.s*=l.s,!p||!p[0]||!g||!g[0])return new m(!e.s||p&&!p[0]&&!g||g&&!g[0]&&!p?NaN:!p||!g?e.s/0:e.s*0);for(n=F(l.e/b)+F(e.e/b),c=p.length,a=g.length,c<a&&(o=p,p=g,g=o,s=c,c=a,a=s),o=[],s=c+a,r=s;r--;)o.push(0);for(r=a;--r>=0;){for(t=0,i=c+r;i>r;)u=o[i]+g[r]*p[i-r-1]+t,o[i--]=u%H|0,t=u/H|0;o[i]=(o[i]+t)%H|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=De(o,n),w?h(e,m.precision,m.rounding):e};f.toBinary=function(e,t){return $e(this,2,e,t)};f.toDecimalPlaces=f.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(W(e,0,ae),t===void 0?t=r.rounding:W(t,0,8),h(n,e+n.e+1,t))};f.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Z(r,!0):(W(e,0,ae),t===void 0?t=i.rounding:W(t,0,8),r=h(new i(r),e+1,t),n=Z(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};f.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?n=Z(i):(W(e,0,ae),t===void 0?t=o.rounding:W(t,0,8),r=h(new o(i),e+i.e+1,t),n=Z(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};f.toFraction=function(e){var t,n,r,i,o,s,u,c,a,l,m,p,g=this,A=g.d,y=g.constructor;if(!A)return new y(g);if(a=n=new y(1),r=c=new y(0),t=new y(r),o=t.e=Ct(A)-g.e-1,s=o%b,t.d[0]=M(10,s<0?b+s:s),e==null)e=o>0?t:a;else{if(u=new y(e),!u.isInt()||u.lt(a))throw Error(se+u);e=u.gt(t)?o>0?t:a:u}for(w=!1,u=new y(v(A)),l=y.precision,y.precision=o=A.length*b*2;m=L(u,t,0,1,1),i=n.plus(m.times(r)),i.cmp(e)!=1;)n=r,r=i,i=a,a=c.plus(m.times(i)),c=i,i=t,t=u.minus(m.times(i)),u=i;return i=L(e.minus(n),r,0,1,1),c=c.plus(i.times(a)),n=n.plus(i.times(r)),c.s=a.s=g.s,p=L(a,r,o,1).minus(g).abs().cmp(L(c,n,o,1).minus(g).abs())<1?[a,r]:[c,n],y.precision=l,w=!0,p};f.toHexadecimal=f.toHex=function(e,t){return $e(this,16,e,t)};f.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:W(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(w=!1,n=L(n,e,0,t,1).times(e),w=!0,h(n)):(e.s=n.s,n=e),n};f.toNumber=function(){return+this};f.toOctal=function(e,t){return $e(this,8,e,t)};f.toPower=f.pow=function(e){var t,n,r,i,o,s,u=this,c=u.constructor,a=+(e=new c(e));if(!u.d||!e.d||!u.d[0]||!e.d[0])return new c(M(+u,a));if(u=new c(u),u.eq(1))return u;if(r=c.precision,o=c.rounding,e.eq(1))return h(u,r,o);if(t=F(e.e/b),t>=e.d.length-1&&(n=a<0?-a:a)<=fn)return i=Et(c,u,n,r),e.s<0?new c(1).div(i):h(i,r,o);if(s=u.s,s<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(s=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=s,u}return n=M(+u,a),t=n==0||!isFinite(n)?F(a*(Math.log("0."+v(u.d))/Math.LN10+u.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?s/0:0):(w=!1,c.rounding=u.s=1,n=Math.min(12,(t+"").length),i=Ye(e.times(oe(u,r+n)),r),i.d&&(i=h(i,r+5,1),he(i.d,r,o)&&(t=r+10,i=h(Ye(e.times(oe(u,t+n)),t),t+5,1),+v(i.d).slice(r+1,r+15)+1==1e14&&(i=h(i,r+1,0)))),i.s=s,w=!0,c.rounding=o,h(i,r,o))};f.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Z(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(W(e,1,ae),t===void 0?t=i.rounding:W(t,0,8),r=h(new i(r),e,t),n=Z(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};f.toSignificantDigits=f.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(W(e,1,ae),t===void 0?t=r.rounding:W(t,0,8)),h(new r(n),e,t)};f.toString=function(){var e=this,t=e.constructor,n=Z(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};f.truncated=f.trunc=function(){return h(new this.constructor(this),this.e+1,1)};f.valueOf=f.toJSON=function(){var e=this,t=e.constructor,n=Z(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function v(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",n=b-r.length,n&&(o+=ie(n)),o+=r;s=e[t],r=s+"",n=b-r.length,n&&(o+=ie(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function W(e,t,n){if(e!==~~e||e<t||e>n)throw Error(se+e)}function he(e,t,n,r){var i,o,s,u;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=b,i=0):(i=Math.ceil((t+1)/b),t%=b),o=M(10,b-t),u=e[i]%o|0,r==null?t<3?(t==0?u=u/100|0:t==1&&(u=u/10|0),s=n<4&&u==99999||n>3&&u==49999||u==5e4||u==0):s=(n<4&&u+1==o||n>3&&u+1==o/2)&&(e[i+1]/o/100|0)==M(10,t-2)-1||(u==o/2||u==0)&&(e[i+1]/o/100|0)==0:t<4?(t==0?u=u/1e3|0:t==1?u=u/100|0:t==2&&(u=u/10|0),s=(r||n<4)&&u==9999||!r&&n>3&&u==4999):s=((r||n<4)&&u+1==o||!r&&n>3&&u+1==o/2)&&(e[i+1]/o/1e3|0)==M(10,t-3)-1,s}function Ee(e,t,n){for(var r,i=[0],o,s=0,u=e.length;s<u;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=Ze.indexOf(e.charAt(s++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function gn(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/Oe(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=pe(e,1,t.times(i),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}var L=function(){function e(r,i,o){var s,u=0,c=r.length;for(r=r.slice();c--;)s=r[c]*i+u,r[c]=s%o|0,u=s/o|0;return u&&r.unshift(u),r}function t(r,i,o,s){var u,c;if(o!=s)c=o>s?1:-1;else for(u=c=0;u<o;u++)if(r[u]!=i[u]){c=r[u]>i[u]?1:-1;break}return c}function n(r,i,o,s){for(var u=0;o--;)r[o]-=u,u=r[o]<i[o]?1:0,r[o]=u*s+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s,u,c){var a,l,m,p,g,A,y,E,I,V,S,O,Ie,z,Ge,Le,ge,He,U,Be,Ne=r.constructor,je=r.s==i.s?1:-1,K=r.d,B=i.d;if(!K||!K[0]||!B||!B[0])return new Ne(!r.s||!i.s||(K?B&&K[0]==B[0]:!B)?NaN:K&&K[0]==0||!B?je*0:je/0);for(c?(g=1,l=r.e-i.e):(c=H,g=b,l=F(r.e/g)-F(i.e/g)),U=B.length,ge=K.length,I=new Ne(je),V=I.d=[],m=0;B[m]==(K[m]||0);m++);if(B[m]>(K[m]||0)&&l--,o==null?(z=o=Ne.precision,s=Ne.rounding):u?z=o+(r.e-i.e)+1:z=o,z<0)V.push(1),A=!0;else{if(z=z/g+2|0,m=0,U==1){for(p=0,B=B[0],z++;(m<ge||p)&&z--;m++)Ge=p*c+(K[m]||0),V[m]=Ge/B|0,p=Ge%B|0;A=p||m<ge}else{for(p=c/(B[0]+1)|0,p>1&&(B=e(B,p,c),K=e(K,p,c),U=B.length,ge=K.length),Le=U,S=K.slice(0,U),O=S.length;O<U;)S[O++]=0;Be=B.slice(),Be.unshift(0),He=B[0],B[1]>=c/2&&++He;do p=0,a=t(B,S,U,O),a<0?(Ie=S[0],U!=O&&(Ie=Ie*c+(S[1]||0)),p=Ie/He|0,p>1?(p>=c&&(p=c-1),y=e(B,p,c),E=y.length,O=S.length,a=t(y,S,E,O),a==1&&(p--,n(y,U<E?Be:B,E,c))):(p==0&&(a=p=1),y=B.slice()),E=y.length,E<O&&y.unshift(0),n(S,y,O,c),a==-1&&(O=S.length,a=t(B,S,U,O),a<1&&(p++,n(S,U<O?Be:B,O,c))),O=S.length):a===0&&(p++,S=[0]),V[m++]=p,a&&S[0]?S[O++]=K[Le]||0:(S=[K[Le]],O=1);while((Le++<ge||S[0]!==void 0)&&z--);A=S[0]!==void 0}V[0]||V.shift()}if(g==1)I.e=l,St=A;else{for(m=1,p=V[0];p>=10;p/=10)m++;I.e=m+l*g-1,h(I,u?o+I.e+1:o,s,A)}return I}}();function h(e,t,n,r){var i,o,s,u,c,a,l,m,p,g=e.constructor;e:if(t!=null){if(m=e.d,!m)return e;for(i=1,u=m[0];u>=10;u/=10)i++;if(o=t-i,o<0)o+=b,s=t,l=m[p=0],c=l/M(10,i-s-1)%10|0;else if(p=Math.ceil((o+1)/b),u=m.length,p>=u)if(r){for(;u++<=p;)m.push(0);l=c=0,i=1,o%=b,s=o-b+1}else break e;else{for(l=u=m[p],i=1;u>=10;u/=10)i++;o%=b,s=o-b+i,c=s<0?0:l/M(10,i-s-1)%10|0}if(r=r||t<0||m[p+1]!==void 0||(s<0?l:l%M(10,i-s-1)),a=n<4?(c||r)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||r||n==6&&(o>0?s>0?l/M(10,i-s):0:m[p-1])%10&1||n==(e.s<0?8:7)),t<1||!m[0])return m.length=0,a?(t-=e.e+1,m[0]=M(10,(b-t%b)%b),e.e=-t||0):m[0]=e.e=0,e;if(o==0?(m.length=p,u=1,p--):(m.length=p+1,u=M(10,b-o),m[p]=s>0?(l/M(10,i-s)%M(10,s)|0)*u:0),a)for(;;)if(p==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=u,u=1;s>=10;s/=10)u++;o!=u&&(e.e++,m[0]==H&&(m[0]=1));break}else{if(m[p]+=u,m[p]!=H)break;m[p--]=0,u=1}for(o=m.length;m[--o]===0;)m.pop()}return w&&(e.e>g.maxE?(e.d=null,e.e=NaN):e.e<g.minE&&(e.e=0,e.d=[0])),e}function Z(e,t,n){if(!e.isFinite())return Rt(e);var r,i=e.e,o=v(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+ie(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+ie(-i-1)+o,n&&(r=n-s)>0&&(o+=ie(r))):i>=s?(o+=ie(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+ie(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=ie(r))),o}function De(e,t){var n=e[0];for(t*=b;n>=10;n/=10)t++;return t}function _e(e,t,n){if(t>dn)throw w=!0,n&&(e.precision=n),Error(It);return h(new e(Me),t,1,!0)}function G(e,t,n){if(t>Xe)throw Error(It);return h(new e(Re),t,n,!0)}function Ct(e){var t=e.length-1,n=t*b+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function ie(e){for(var t="";e--;)t+="0";return t}function Et(e,t,n,r){var i,o=new e(1),s=Math.ceil(r/b+4);for(w=!1;;){if(n%2&&(o=o.times(t),At(o.d,s)&&(i=!0)),n=F(n/2),n===0){n=o.d.length-1,i&&o.d[n]===0&&++o.d[n];break}t=t.times(t),At(t.d,s)}return w=!0,o}function Pt(e){return e.d[e.d.length-1]&1}function Mt(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;)if(r=new e(t[o]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function Ye(e,t){var n,r,i,o,s,u,c,a=0,l=0,m=0,p=e.constructor,g=p.rounding,A=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(w=!1,c=A):c=t,u=new p(.03125);e.e>-2;)e=e.times(u),m+=5;for(r=Math.log(M(2,m))/Math.LN10*2+5|0,c+=r,n=o=s=new p(1),p.precision=c;;){if(o=h(o.times(e),c,1),n=n.times(++l),u=s.plus(L(o,n,c,1)),v(u.d).slice(0,c)===v(s.d).slice(0,c)){for(i=m;i--;)s=h(s.times(s),c,1);if(t==null)if(a<3&&he(s.d,c-r,g,a))p.precision=c+=10,n=o=u=new p(1),l=0,a++;else return h(s,p.precision=A,g,w=!0);else return p.precision=A,s}s=u}}function oe(e,t){var n,r,i,o,s,u,c,a,l,m,p,g=1,A=10,y=e,E=y.d,I=y.constructor,V=I.rounding,S=I.precision;if(y.s<0||!E||!E[0]||!y.e&&E[0]==1&&E.length==1)return new I(E&&!E[0]?-1/0:y.s!=1?NaN:E?0:y);if(t==null?(w=!1,l=S):l=t,I.precision=l+=A,n=v(E),r=n.charAt(0),Math.abs(o=y.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(e),n=v(y.d),r=n.charAt(0),g++;o=y.e,r>1?(y=new I("0."+n),o++):y=new I(r+"."+n.slice(1))}else return a=_e(I,l+2,S).times(o+""),y=oe(new I(r+"."+n.slice(1)),l-A).plus(a),I.precision=S,t==null?h(y,S,V,w=!0):y;for(m=y,c=s=y=L(y.minus(1),y.plus(1),l,1),p=h(y.times(y),l,1),i=3;;){if(s=h(s.times(p),l,1),a=c.plus(L(s,new I(i),l,1)),v(a.d).slice(0,l)===v(c.d).slice(0,l))if(c=c.times(2),o!==0&&(c=c.plus(_e(I,l+2,S).times(o+""))),c=L(c,new I(g),l,1),t==null)if(he(c.d,l-A,V,u))I.precision=l+=A,a=s=y=L(m.minus(1),m.plus(1),l,1),p=h(y.times(y),l,1),i=u=1;else return h(c,I.precision=S,V,w=!0);else return I.precision=S,c;c=a,i+=2}}function Rt(e){return String(e.s*e.s/0)}function Je(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%b,n<0&&(r+=b),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=b;r<i;)e.d.push(+t.slice(r,r+=b));t=t.slice(r),r=b-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),w&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function hn(e,t){var n,r,i,o,s,u,c,a,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Nt.test(t))return Je(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(mn.test(t))n=16,t=t.toLowerCase();else if(ln.test(t))n=2;else if(pn.test(t))n=8;else throw Error(se+t);for(o=t.search(/p/i),o>0?(c=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,r=e.constructor,s&&(t=t.replace(".",""),u=t.length,o=u-o,i=Et(r,new r(n),o,o*2)),a=Ee(t,n,H),l=a.length-1,o=l;a[o]===0;--o)a.pop();return o<0?new r(e.s*0):(e.e=De(a,l),e.d=a,w=!1,s&&(e=L(e,i,u*4)),c&&(e=e.times(Math.abs(c)<54?M(2,c):be.pow(2,c))),w=!0,e)}function bn(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:pe(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/Oe(5,n)),t=pe(e,2,t,t);for(var i,o=new e(5),s=new e(16),u=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(s.times(i).minus(u))));return t}function pe(e,t,n,r,i){var o,s,u,c,a=1,l=e.precision,m=Math.ceil(l/b);for(w=!1,c=n.times(n),u=new e(r);;){if(s=L(u.times(c),new e(t++*t++),l,1),u=i?r.plus(s):r.minus(s),r=L(s.times(c),new e(t++*t++),l,1),s=u.plus(r),s.d[m]!==void 0){for(o=m;s.d[o]===u.d[o]&&o--;);if(o==-1)break}o=u,u=r,r=s,s=o,a++}return w=!0,s.d.length=m+1,s}function Oe(e,t){for(var n=e;--t;)n*=e;return n}function _t(e,t){var n,r=t.s<0,i=G(e,e.precision,1),o=i.times(.5);if(t=t.abs(),t.lte(o))return X=r?4:1,t;if(n=t.divToInt(i),n.isZero())X=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(o))return X=Pt(n)?r?2:3:r?4:1,t;X=Pt(n)?r?1:4:r?3:2}return t.minus(i).abs()}function $e(e,t,n,r){var i,o,s,u,c,a,l,m,p,g=e.constructor,A=n!==void 0;if(A?(W(n,1,ae),r===void 0?r=g.rounding:W(r,0,8)):(n=g.precision,r=g.rounding),!e.isFinite())l=Rt(e);else{for(l=Z(e),s=l.indexOf("."),A?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,s>=0&&(l=l.replace(".",""),p=new g(1),p.e=l.length-s,p.d=Ee(Z(p),10,i),p.e=p.d.length),m=Ee(l,10,i),o=c=m.length;m[--c]==0;)m.pop();if(!m[0])l=A?"0p+0":"0";else{if(s<0?o--:(e=new g(e),e.d=m,e.e=o,e=L(e,p,n,r,0,i),m=e.d,o=e.e,a=St),s=m[n],u=i/2,a=a||m[n+1]!==void 0,a=r<4?(s!==void 0||a)&&(r===0||r===(e.s<0?3:2)):s>u||s===u&&(r===4||a||r===6&&m[n-1]&1||r===(e.s<0?8:7)),m.length=n,a)for(;++m[--n]>i-1;)m[n]=0,n||(++o,m.unshift(1));for(c=m.length;!m[c-1];--c);for(s=0,l="";s<c;s++)l+=Ze.charAt(m[s]);if(A){if(c>1)if(t==16||t==8){for(s=t==16?4:3,--c;c%s;c++)l+="0";for(m=Ee(l,i,t),c=m.length;!m[c-1];--c);for(s=1,l="1.";s<c;s++)l+=Ze.charAt(m[s])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>c)for(o-=c;o--;)l+="0";else o<c&&(l=l.slice(0,o)+"."+l.slice(o))}l=(t==16?"0x":t==2?"0b":t==8?"0o":"")+l}return e.s<0?"-"+l:l}function At(e,t){if(e.length>t)return e.length=t,!0}function yn(e){return new this(e).abs()}function wn(e){return new this(e).acos()}function Tn(e){return new this(e).acosh()}function xn(e,t){return new this(e).plus(t)}function Pn(e){return new this(e).asin()}function An(e){return new this(e).asinh()}function kn(e){return new this(e).atan()}function Sn(e){return new this(e).atanh()}function In(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=G(this,o,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?G(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=G(this,o,1).times(.5),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(L(e,t,o,1)),t=G(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(L(e,t,o,1)),n}function Ln(e){return new this(e).cbrt()}function Bn(e){return h(e=new this(e),e.e+1,2)}function Nn(e,t,n){return new this(e).clamp(t,n)}function Cn(e){if(!e||typeof e!="object")throw Error(ve+"Object expected");var t,n,r,i=e.defaults===!0,o=["precision",1,ae,"rounding",0,8,"toExpNeg",-me,0,"toExpPos",0,me,"maxE",0,me,"minE",-me,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=ze[n]),(r=e[n])!==void 0)if(F(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(se+n+": "+r);if(n="crypto",i&&(this[n]=ze[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Lt);else this[n]=!1;else throw Error(se+n+": "+r);return this}function En(e){return new this(e).cos()}function Mn(e){return new this(e).cosh()}function vt(e){var t,n,r;function i(o){var s,u,c,a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,kt(o)){a.s=o.s,w?!o.d||o.e>i.maxE?(a.e=NaN,a.d=null):o.e<i.minE?(a.e=0,a.d=[0]):(a.e=o.e,a.d=o.d.slice()):(a.e=o.e,a.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){a.s=1/o<0?-1:1,a.e=0,a.d=[0];return}if(o<0?(o=-o,a.s=-1):a.s=1,o===~~o&&o<1e7){for(s=0,u=o;u>=10;u/=10)s++;w?s>i.maxE?(a.e=NaN,a.d=null):s<i.minE?(a.e=0,a.d=[0]):(a.e=s,a.d=[o]):(a.e=s,a.d=[o]);return}else if(o*0!==0){o||(a.s=NaN),a.e=NaN,a.d=null;return}return Je(a,o.toString())}else if(c!=="string")throw Error(se+o);return(u=o.charCodeAt(0))===45?(o=o.slice(1),a.s=-1):(u===43&&(o=o.slice(1)),a.s=1),Nt.test(o)?Je(a,o):hn(a,o)}if(i.prototype=f,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Cn,i.clone=vt,i.isDecimal=kt,i.abs=yn,i.acos=wn,i.acosh=Tn,i.add=xn,i.asin=Pn,i.asinh=An,i.atan=kn,i.atanh=Sn,i.atan2=In,i.cbrt=Ln,i.ceil=Bn,i.clamp=Nn,i.cos=En,i.cosh=Mn,i.div=Rn,i.exp=_n,i.floor=vn,i.hypot=Dn,i.ln=On,i.log=Kn,i.log10=Vn,i.log2=Fn,i.max=Wn,i.min=qn,i.mod=Un,i.mul=Gn,i.pow=Hn,i.random=jn,i.round=Qn,i.sign=Zn,i.sin=zn,i.sinh=Xn,i.sqrt=Yn,i.sub=Jn,i.sum=$n,i.tan=er,i.tanh=tr,i.trunc=nr,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Rn(e,t){return new this(e).div(t)}function _n(e){return new this(e).exp()}function vn(e){return h(e=new this(e),e.e+1,3)}function Dn(){var e,t,n=new this(0);for(w=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return w=!0,new this(1/0);n=t}return w=!0,n.sqrt()}function kt(e){return e instanceof be||e&&e.toStringTag===Bt||!1}function On(e){return new this(e).ln()}function Kn(e,t){return new this(e).log(t)}function Fn(e){return new this(e).log(2)}function Vn(e){return new this(e).log(10)}function Wn(){return Mt(this,arguments,"lt")}function qn(){return Mt(this,arguments,"gt")}function Un(e,t){return new this(e).mod(t)}function Gn(e,t){return new this(e).mul(t)}function Hn(e,t){return new this(e).pow(t)}function jn(e){var t,n,r,i,o=0,s=new this(1),u=[];if(e===void 0?e=this.precision:W(e,1,ae),r=Math.ceil(e/b),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)i=t[o],i>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:u[o++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);o<r;)i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,o):(u.push(i%1e7),o+=4);o=r/4}else throw Error(Lt);else for(;o<r;)u[o++]=Math.random()*1e7|0;for(r=u[--o],e%=b,r&&e&&(i=M(10,b-e),u[o]=(r/i|0)*i);u[o]===0;o--)u.pop();if(o<0)n=0,u=[0];else{for(n=-1;u[0]===0;n-=b)u.shift();for(r=1,i=u[0];i>=10;i/=10)r++;r<b&&(n-=b-r)}return s.e=n,s.d=u,s}function Qn(e){return h(e=new this(e),e.e+1,this.rounding)}function Zn(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function zn(e){return new this(e).sin()}function Xn(e){return new this(e).sinh()}function Yn(e){return new this(e).sqrt()}function Jn(e,t){return new this(e).sub(t)}function $n(){var e=0,t=arguments,n=new this(t[e]);for(w=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return w=!0,h(n,this.precision,this.rounding)}function er(e){return new this(e).tan()}function tr(e){return new this(e).tanh()}function nr(e){return h(e=new this(e),e.e+1,1)}f[Symbol.for("nodejs.util.inspect.custom")]=f.toString;f[Symbol.toStringTag]="Decimal";var be=f.constructor=vt(ze);Me=new be(Me);Re=new be(Re);var fe=be;import{TOKEN_PROGRAM_ID as Jr}from"@solana/spl-token";import{ComputeBudgetProgram as ui,Keypair as mi,PublicKey as Kt,Transaction as tt,TransactionMessage as di,VersionedTransaction as gi}from"@solana/web3.js";import{get as Dt,set as rr}from"lodash";var et=class{constructor(t){this.logLevel=t.logLevel!==void 0?t.logLevel:0,this.name=t.name}set level(t){this.logLevel=t}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(t){return t<=this.logLevel}error(...t){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...t),this):this}logWithError(...t){let n=t.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(n)}warning(...t){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...t),this):this}info(...t){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...t),this):this}debug(...t){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...t),this):this}},Ot={},ir={};function _(e){let t=Dt(Ot,e);if(!t){let n=Dt(ir,e);t=new et({name:e,logLevel:n}),rr(Ot,e,t)}return t}import{TOKEN_PROGRAM_ID as wi}from"@solana/spl-token";var Y=_("Raydium_txUtil"),or=1644;function sr(e,t){e.length<1&&Y.logWithError(`no instructions provided: ${e.toString()}`),t.length<1&&Y.logWithError(`no signers provided:, ${t.toString()}`);let n=new tt;n.recentBlockhash="11111111111111111111111111111111",n.feePayer=t[0],n.add(...e);try{return Buffer.from(n.serialize({verifySignatures:!1})).toString("base64").length<or}catch{return!1}}async function Ft(e,t,n,r=!0){let i=new Kt("RaydiumSimuLateTransaction11111111111111111"),o=[],s=new tt;s.feePayer=i;for(let a of t)sr([...s.instructions,a],[i])||(o.push(s),s=new tt,s.feePayer=i),s.add(a);s.instructions.length>0&&o.push(s);let u=[];try{if(u=await ar(e,o,r),u.find(a=>a.err!==null))throw Error("rpc simulateTransaction error")}catch(a){a instanceof Error&&Y.logWithError("failed to simulate for instructions","RPC_ERROR",{message:a.message})}let c=[];for(let a of u)if(Y.debug("simulate result:",a),a.logs){let l=a.logs.filter(m=>m&&m.includes(n));Y.debug("filteredLog:",c),l.length||Y.logWithError("simulate log not match keyword","keyword",n),c.push(...l)}return c}function Vt(e,t){let n=e.match(/{["\w:,]+}/g);return!n||n.length!==1?Y.logWithError(`simulate log fail to match json, keyword: ${t}`):n[0]}function J(e,t){let r=new RegExp(`"${t}":(\\d+)`,"g").exec(e);return!r||r.length!==2?Y.logWithError(`simulate log fail to match key", key: ${t}`):r[1]}function de(e,t){let[n,r]=Kt.findProgramAddressSync(e,t);return{publicKey:n,nonce:r}}async function ar(e,t,n){let r=[];if(n){let i=await e.getLatestBlockhash(),o=[];for(let a of t){a.recentBlockhash=i.blockhash,a.lastValidBlockHeight=i.lastValidBlockHeight;let m=a._compile().serialize(),g=a._serialize(m).toString("base64");o.push(g)}let s=o.map(a=>{let l=e._buildArgs([a],void 0,"base64");return{methodName:"simulateTransaction",args:l}}),u=[],c=20;for(let a=0;a<Math.ceil(s.length/c);a++)u.push(s.slice(a*c,(a+1)*c));r=await(await Promise.all(u.map(async a=>(await e._rpcBatchRequest(a)).map(l=>l.result.value)))).flat()}else try{r=await Promise.all(t.map(async i=>await(await e.simulateTransaction(i)).value))}catch(i){i instanceof Error&&Y.logWithError("failed to get info for multiple accounts","RPC_ERROR",{message:i.message})}return r}import{PublicKey as Cu}from"@solana/web3.js";import{MintLayout as Mu,TOKEN_PROGRAM_ID as _u}from"@solana/spl-token";import Mr from"big.js";import uu from"bn.js";import ee from"bn.js";import{PublicKey as ur}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Wt}from"@solana/spl-token";var rt={chainId:101,address:ur.default.toBase58(),programId:Wt.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},$={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Wt.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as at}from"@solana/web3.js";import{PublicKey as C,SystemProgram as qt,SYSVAR_RENT_PUBKEY as cr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as lr}from"@solana/spl-token";function q({pubkey:e,isSigner:t=!1,isWritable:n=!0}){return{pubkey:e,isWritable:n,isSigner:t}}var Li=[q({pubkey:lr,isWritable:!1}),q({pubkey:qt.programId,isWritable:!1}),q({pubkey:cr,isWritable:!1})];function ot({publicKey:e,transformSol:t}){let n=Ut(e.toString());if(n instanceof C)return t&&n.equals(ye)?it:n;if(t&&n.toString()===ye.toBase58())return it;if(typeof n=="string"){if(n===C.default.toBase58())return C.default;try{return new C(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Ut(e){try{return new C(e)}catch{return e}}var Bi=new C("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ni=new C("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),mr=new C("SysvarRent111111111111111111111111111111111"),Ci=new C("SysvarC1ock11111111111111111111111111111111"),Ei=new C("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Mi=new C("Sysvar1nstructions1111111111111111111111111"),Ri=qt.programId,_i=new C("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),vi=new C("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Di=new C("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Oi=new C("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Ki=new C("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Fi=new C("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Vi=new C("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Wi=new C("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),qi=new C("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Ui=new C("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Gi=new C("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),it=new C("So11111111111111111111111111111111111111112"),ye=C.default;function st(e){return ot({publicKey:e,transformSol:!0})}var ut=class{constructor({mint:t,decimals:n,symbol:r,name:i,skipMint:o=!1,isToken2022:s=!1}){if(t===ye.toBase58()||t instanceof at&&ye.equals(t)){this.decimals=$.decimals,this.symbol=$.symbol,this.name=$.name,this.mint=new at($.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=r||t.toString().substring(0,6),this.name=i||t.toString().substring(0,6),this.mint=o?at.default:ot({publicKey:t}),this.isToken2022=s}equals(t){return this===t?!0:this.mint.equals(t.mint)}},ue=ut;ue.WSOL=new ut(re(Q({},$),{mint:$.address}));var ct=class{constructor({decimals:t,symbol:n="UNKNOWN",name:r="UNKNOWN"}){this.decimals=t,this.symbol=n,this.name=r}equals(t){return this===t}},Ke=ct;Ke.SOL=new ct(rt);import Ve from"big.js";import gr from"bn.js";import hr from"decimal.js-light";import we from"bn.js";var Gt=9007199254740991;function j(e){let t=_("Raydium_parseBigNumberish");if(e instanceof we)return e;if(typeof e=="string"){if(e.match(/^-?[0-9]+$/))return new we(e);t.logWithError(`invalid BigNumberish string: ${e}`)}return typeof e=="number"?(e%1&&t.logWithError(`BigNumberish number underflow: ${e}`),(e>=Gt||e<=-Gt)&&t.logWithError(`BigNumberish number overflow: ${e}`),new we(String(e))):typeof e=="bigint"?new we(e.toString()):(t.error(`invalid BigNumberish value: ${e}`),new we(0))}import pr from"toformat";var fr=pr,Te=fr;var Fe=_("module/fraction"),lt=Te(Ve),xe=Te(hr),br={[0]:xe.ROUND_DOWN,[1]:xe.ROUND_HALF_UP,[2]:xe.ROUND_UP},yr={[0]:Ve.roundDown,[1]:Ve.roundHalfUp,[2]:Ve.roundUp},N=class{constructor(t,n=new gr(1)){this.numerator=j(t),this.denominator=j(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new N(this.denominator,this.numerator)}add(t){let n=t instanceof N?t:new N(j(t));return this.denominator.eq(n.denominator)?new N(this.numerator.add(n.numerator),this.denominator):new N(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(t){let n=t instanceof N?t:new N(j(t));return this.denominator.eq(n.denominator)?new N(this.numerator.sub(n.numerator),this.denominator):new N(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(t){let n=t instanceof N?t:new N(j(t));return new N(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(t){let n=t instanceof N?t:new N(j(t));return new N(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(t,n={groupSeparator:""},r=1){Number.isInteger(t)||Fe.logWithError(`${t} is not an integer.`),t<=0&&Fe.logWithError(`${t} is not positive.`),xe.set({precision:t+1,rounding:br[r]});let i=new xe(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return i.toFormat(i.decimalPlaces(),n)}toFixed(t,n={groupSeparator:""},r=1){return Number.isInteger(t)||Fe.logWithError(`${t} is not an integer.`),t<0&&Fe.logWithError(`${t} is negative.`),lt.DP=t,lt.RM=yr[r]||1,new lt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,n)}isZero(){return this.numerator.isZero()}};import wr from"bn.js";var ho=new N(new wr(100));var Po=_("Raydium_price");import{PublicKey as Eo}from"@solana/web3.js";import Ro from"bn.js";var Qt=new ee(0),Tr=new ee(1),Xo=new ee(2),Yo=new ee(3),Jo=new ee(5),xr=new ee(10),$o=new ee(100),es=new ee(1e3),ts=new ee(1e4);import{PublicKey as us}from"@solana/web3.js";import{MINT_SIZE as ps,TOKEN_PROGRAM_ID as fs,getTransferFeeConfig as ds,unpackMint as gs}from"@solana/spl-token";var hs=_("Raydium_accountInfo_util");import{PublicKey as As}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Ss}from"@solana/spl-token";import{PublicKey as T}from"@solana/web3.js";var Ns=new T("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Cs=new T("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Es=new T("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Ms=new T("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Rs=new T("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),_s=new T("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),vs=new T("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Ds=new T("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Os=new T("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Ks=new T("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Fs=new T("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Vs=new T("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Ws=new T("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),qs=new T("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Us=new T("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Gs=new T("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Hs=new T("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),js=new T("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Qs=new T("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Zs=new T("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),zs=new T("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Xs=new T("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Pr=new T("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),Ar=new T("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),kr=new T("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2"),Ys=new T("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Sr=new T("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),Js=new T("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Ir=new T("7AFUeLVRjBfzqK3tTGw8hN48KLQWSk6DTE8xprWdPqix"),$s=new T("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),ea=new T("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Lr=new T("7soRSLviCKHCKzCbRuVpZDif76NWLVqFtbjt8LpyxWSq"),Br=new T("DG6kZFFCqxdtWXw53Zc28hLs3MTr28Efkm2FrsNERNSQ");var ta={SERUM_MARKET:T.default,OPENBOOK_MARKET:new T("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),UTIL1216:T.default,FarmV3:new T("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),FarmV5:new T("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),FarmV6:new T("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),AmmV4:new T("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),AmmStable:new T("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),CLMM:new T("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),CLMM_LOCK_PROGRAM_ID:new T("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),CLMM_LOCK_AUTH_ID:new T("8qmHNvu2Kr2C7U8mJL4Vz1vTDxMhVuXKREwU7TNoaVEo"),Router:new T("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),CREATE_CPMM_POOL_PROGRAM:Pr,CREATE_CPMM_POOL_AUTH:Ar,CREATE_CPMM_POOL_FEE_ACC:kr,FEE_DESTINATION_ID:new T("3XMrhbv989VxAMi3DErLV9eJht1pHppW5LbKxe9fkEFR"),LOCK_CPMM_PROGRAM:Sr,LCOK_CPMM_AUTH:Ir,LAUNCHPAD_PROGRAM:Lr,LAUNCHPAD_AUTH:Br};import ia from"bn.js";import{PublicKey as Nr,AddressLookupTableAccount as Zt}from"@solana/web3.js";var Cr={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new Zt({key:new Nr("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:Zt.deserialize(Buffer.from("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","base64"))})};import{PublicKey as Pa,sendAndConfirmTransaction as Aa,SystemProgram as Ia,Transaction as La,TransactionMessage as Na,VersionedTransaction as Ca}from"@solana/web3.js";import Ma from"axios";import Er from"bn.js";var Fa=new Er(1e6);var bu=_("Raydium_amount"),yu=Te(Mr);var We=i=>{var o=i,{address:e,programId:t,decimals:n}=o,r=Qe(o,["address","programId","decimals"]);return Q({chainId:101,address:st(e).toBase58(),programId:t,logoURI:"",symbol:"",name:"",decimals:n,tags:[],extensions:r.extensions||{}},r)};import{PublicKey as ne,SystemProgram as $c,SYSVAR_RENT_PUBKEY as el,TransactionInstruction as zr}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as nl,TOKEN_PROGRAM_ID as rl}from"@solana/spl-token";import{PublicKey as Kr}from"@solana/web3.js";import Yt,{isBN as Jt}from"bn.js";import{bits as Wu,BitStructure as qu,blob as Rr,Blob as Uu,cstr as Gu,f32 as Hu,f32be as ju,f64 as Qu,f64be as Zu,greedy as zu,Layout as _r,ns64 as Xu,ns64be as Yu,nu64 as Ju,nu64be as $u,offset as ec,s16 as tc,s16be as nc,s24 as rc,s24be as ic,s32 as oc,s32be as sc,s40 as ac,s40be as uc,s48 as cc,s48be as lc,s8 as mc,seq as vr,struct as pc,Structure as Dr,u16 as fc,u16be as dc,u24 as gc,u24be as hc,u32 as bc,u32be as yc,u40 as wc,u40be as Tc,u48 as xc,u48be as Pc,u8 as Ac,UInt as Or,union as kc,Union as Sc,unionLayoutDiscriminator as Ic,utf8 as Lc}from"@solana/buffer-layout";var pt=_r,zt=Dr;var ft=Or;var Xt=vr;var dt=Rr;var qe=class extends pt{constructor(n,r,i){super(n,i);this.blob=dt(n),this.signed=r}decode(n,r=0){let i=new Yt(this.blob.decode(n,r),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(n,r,i=0){return typeof n=="number"&&(n=new Yt(n)),this.signed&&(n=n.toTwos(this.span*8)),this.blob.encode(n.toArrayLike(Buffer,"le",this.span),r,i)}};function D(e){return new ft(1,e)}function ce(e){return new ft(4,e)}function d(e){return new qe(8,!1,e)}function te(e){return new qe(16,!1,e)}var gt=class extends pt{constructor(n,r,i,o){super(n.span,o);this.layout=n,this.decoder=r,this.encoder=i}decode(n,r){return this.decoder(this.layout.decode(n,r))}encode(n,r,i){return this.layout.encode(this.encoder(n),r,i)}getSpan(n,r){return this.layout.getSpan(n,r)}};function k(e){return new gt(dt(32),t=>new Kr(t),t=>t.toBuffer(),e)}var ht=class extends zt{decode(t,n){return super.decode(t,n)}};function R(e,t,n){return new ht(e,t,n)}function Pe(e,t,n){let r,i=typeof t=="number"?t:Jt(t)?t.toNumber():new Proxy(t,{get(o,s){if(!r){let u=Reflect.get(o,"count");r=Jt(u)?u.toNumber():u,Reflect.set(o,"count",r)}return Reflect.get(o,s)},set(o,s,u){return s==="count"&&(r=u),Reflect.set(o,s,u)}});return Xt(e,i,n)}var Fr=R([D("instruction"),d("amountIn"),d("minAmountOut")]),Vr=R([D("instruction"),d("maxAmountIn"),d("amountOut")]),Uc=R([D("instruction"),D("nonce")]),Wr=R([D("instruction"),D("nonce"),d("startTime")]),$t=R([d("status"),d("nonce"),d("maxOrder"),d("depth"),d("baseDecimal"),d("quoteDecimal"),d("state"),d("resetFlag"),d("minSize"),d("volMaxCutRatio"),d("amountWaveRatio"),d("baseLotSize"),d("quoteLotSize"),d("minPriceMultiplier"),d("maxPriceMultiplier"),d("systemDecimalValue"),d("minSeparateNumerator"),d("minSeparateDenominator"),d("tradeFeeNumerator"),d("tradeFeeDenominator"),d("pnlNumerator"),d("pnlDenominator"),d("swapFeeNumerator"),d("swapFeeDenominator"),d("baseNeedTakePnl"),d("quoteNeedTakePnl"),d("quoteTotalPnl"),d("baseTotalPnl"),d("poolOpenTime"),d("punishPcAmount"),d("punishCoinAmount"),d("orderbookToInitTime"),te("swapBaseInAmount"),te("swapQuoteOutAmount"),d("swapBase2QuoteFee"),te("swapQuoteInAmount"),te("swapBaseOutAmount"),d("swapQuote2BaseFee"),k("baseVault"),k("quoteVault"),k("baseMint"),k("quoteMint"),k("lpMint"),k("openOrders"),k("marketId"),k("marketProgramId"),k("targetOrders"),k("withdrawQueue"),k("lpVault"),k("owner"),d("lpReserve"),Pe(d(),3,"padding")]),Gc=R([d("accountType"),d("status"),d("nonce"),d("maxOrder"),d("depth"),d("baseDecimal"),d("quoteDecimal"),d("state"),d("resetFlag"),d("minSize"),d("volMaxCutRatio"),d("amountWaveRatio"),d("baseLotSize"),d("quoteLotSize"),d("minPriceMultiplier"),d("maxPriceMultiplier"),d("systemDecimalsValue"),d("abortTradeFactor"),d("priceTickMultiplier"),d("priceTick"),d("minSeparateNumerator"),d("minSeparateDenominator"),d("tradeFeeNumerator"),d("tradeFeeDenominator"),d("pnlNumerator"),d("pnlDenominator"),d("swapFeeNumerator"),d("swapFeeDenominator"),d("baseNeedTakePnl"),d("quoteNeedTakePnl"),d("quoteTotalPnl"),d("baseTotalPnl"),d("poolOpenTime"),d("punishPcAmount"),d("punishCoinAmount"),d("orderbookToInitTime"),te("swapBaseInAmount"),te("swapQuoteOutAmount"),te("swapQuoteInAmount"),te("swapBaseOutAmount"),d("swapQuote2BaseFee"),d("swapBase2QuoteFee"),k("baseVault"),k("quoteVault"),k("baseMint"),k("quoteMint"),k("lpMint"),k("modelDataAccount"),k("openOrders"),k("marketId"),k("marketProgramId"),k("targetOrders"),k("owner"),Pe(d(),64,"padding")]),qr=R([D("instruction"),d("baseAmountIn"),d("quoteAmountIn"),d("fixedSide"),d("otherAmountMin")]),Ur=R([D("instruction"),d("lpAmount"),d("baseAmountMin"),d("quoteAmountMin")]);var Hc=R([d("fee")]);import{PublicKey as Gr}from"@solana/web3.js";var en=new Gr("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Hr=5e4,jr=R([d("x"),d("y"),d("price")]),Qr=R([d("accountType"),d("status"),d("multiplier"),d("validDataCount"),Pe(jr,Hr,"DataElement")]);function Zr(e){let t=Qr.decode(e);return{accountType:t.accountType.toNumber(),status:t.status.toNumber(),multiplier:t.multiplier.toNumber(),validDataCount:t.validDataCount.toNumber(),DataElement:t.DataElement.map(n=>({x:n.x.toNumber(),y:n.y.toNumber(),price:n.price.toNumber()}))}}var Ue=class{constructor({connection:t}){this._layoutData={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};this.connection=t}get stableModelData(){return this._layoutData}async initStableModelLayout(){if(this._layoutData.validDataCount===0&&this.connection){let t=await this.connection.getAccountInfo(en);t&&(this._layoutData=Zr(t==null?void 0:t.data))}}};var pl=_("Raydium_liquidity_instruction");function tn({poolKeys:e}){let t=R([D("instruction"),D("simulateType")]),n=Buffer.alloc(t.span);t.encode({instruction:12,simulateType:0},n);let r=[q({pubkey:new ne(e.id),isWritable:!1}),q({pubkey:new ne(e.authority),isWritable:!1}),q({pubkey:new ne(e.openOrders),isWritable:!1}),q({pubkey:new ne(e.vault.A),isWritable:!1}),q({pubkey:new ne(e.vault.B),isWritable:!1}),q({pubkey:new ne(e.mintLp.address),isWritable:!1}),q({pubkey:new ne(e.marketId),isWritable:!1}),q({pubkey:new ne(e.marketEventQueue),isWritable:!1})];return{instruction:new zr({programId:new ne(e.programId),keys:r,data:n})}}import{PublicKey as Xr}from"@solana/web3.js";import nn from"bn.js";var gl=new nn(25),hl=new nn(1e4);var Yr=_("Raydium_liquidity_serum");function rn({programId:e,marketId:t}){let n=[t.toBuffer()],r=0,i;for(;r<100;){try{let o=n.concat(Buffer.from([r]),Buffer.alloc(7));i=Xr.createProgramAddressSync(o,e)}catch(o){if(o instanceof TypeError)throw o;r++;continue}return{publicKey:i,nonce:r}}throw Yr.logWithError("unable to find a viable program address nonce","params",{programId:e,marketId:t}),new Error("unable to find a viable program address nonce")}var Ae=R([k("mint"),k("owner"),d("amount"),ce("delegateOption"),k("delegate"),D("state"),ce("isNativeOption"),d("isNative"),d("delegatedAmount"),ce("closeAuthorityOption"),k("closeAuthority")]);import{Keypair as Nl,PublicKey as Cl}from"@solana/web3.js";import Rl from"bn.js";import{TOKEN_PROGRAM_ID as Dl}from"@solana/spl-token";var Kl=_("Raydium_Util");import{PublicKey as Gl,SystemProgram as jl}from"@solana/web3.js";import zl from"bn.js";import{createCloseAccountInstruction as $l,createInitializeAccountInstruction as em,createTransferInstruction as tm,TOKEN_PROGRAM_ID as nm}from"@solana/spl-token";var on=R([ce("mintAuthorityOption"),k("mintAuthority"),d("supply"),D("decimals"),D("isInitialized"),ce("freezeAuthorityOption"),k("freezeAuthority")]);function sn({programId:e}){let{publicKey:t}=de([Buffer.from("amm_config_account_seed","utf-8")],e);return t}function le({name:e,programId:t,marketId:n}){let{publicKey:r}=de([t.toBuffer(),n.toBuffer(),Buffer.from(e,"utf-8")],t);return r}function $r({programId:e,marketId:t}){let{publicKey:n}=de([e.toBuffer(),t.toBuffer(),Buffer.from("open_order_associated_seed","utf-8")],e);return n}function ei({programId:e}){return de([Buffer.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],e)}function Rm({version:e,marketVersion:t,marketId:n,baseMint:r,quoteMint:i,baseDecimals:o,quoteDecimals:s,programId:u,marketProgramId:c}){let a=le({name:"amm_associated_seed",programId:u,marketId:n}),l=le({name:"lp_mint_associated_seed",programId:u,marketId:n}),{publicKey:m,nonce:p}=ei({programId:u}),g=le({name:"coin_vault_associated_seed",programId:u,marketId:n}),A=le({name:"pc_vault_associated_seed",programId:u,marketId:n}),y=le({name:"temp_lp_token_associated_seed",programId:u,marketId:n}),E=$r({programId:u,marketId:n}),I=le({name:"target_associated_seed",programId:u,marketId:n}),V=le({name:"withdraw_associated_seed",programId:u,marketId:n}),{publicKey:S}=rn({programId:c,marketId:n});return{id:a,baseMint:r,quoteMint:i,lpMint:l,baseDecimals:o,quoteDecimals:s,lpDecimals:o,version:e,programId:u,authority:m,nonce:p,baseVault:g,quoteVault:A,lpVault:y,openOrders:E,targetOrders:I,withdrawQueue:V,marketVersion:t,marketProgramId:c,marketId:n,marketAuthority:S,lookupTableAccount:Se.default,configId:sn({programId:u})}}var bt;async function _m({connection:e,poolKeysList:t,config:n}){return t.find(i=>i.modelDataAccount)&&(bt||(bt=new Ue({connection:e}),await bt.initStableModelLayout())),await Promise.all(t.map(async i=>{if(i.modelDataAccount){let o=tn({poolKeys:i});return(await Ft(e,[o.instruction],"GetPoolData")).map(c=>{let a=Vt(c,"GetPoolData"),l=new ke(J(a,"status")),m=Number(J(a,"coin_decimals")),p=Number(J(a,"pc_decimals")),g=Number(J(a,"lp_decimals")),A=new ke(J(a,"pool_coin_amount")),y=new ke(J(a,"pool_pc_amount")),E=new ke(J(a,"pool_lp_supply")),I="0";try{I=J(a,"pool_open_time")}catch{}return{status:l,baseDecimals:m,quoteDecimals:p,lpDecimals:g,baseReserve:A,quoteReserve:y,lpSupply:E,startTime:new ke(I)}})[0]}else{let[o,s,u,c]=await e.getMultipleAccountsInfo([new Se(i.id),new Se(i.vault.A),new Se(i.vault.B),new Se(i.mintLp.address)]);if(o===null)throw Error("fetch pool error");if(s===null)throw Error("fetch vaultAccA error");if(u===null)throw Error("fetch vaultAccB error");if(c===null)throw Error("fetch mintAccLp error");let a=$t.decode(o.data),l=Ae.decode(s.data),m=Ae.decode(u.data),p=on.decode(c.data);return{status:a.status,baseDecimals:a.baseDecimal.toNumber(),quoteDecimals:a.quoteDecimal.toNumber(),lpDecimals:p.decimals,baseReserve:l.amount.sub(a.baseNeedTakePnl),quoteReserve:m.amount.sub(a.quoteNeedTakePnl),lpSupply:a.lpReserve,startTime:a.poolOpenTime}}}))}var yt={volume:0,volumeQuote:0,volumeFee:0,apr:0,feeApr:0,priceMin:0,priceMax:0,rewardApr:[]},vm=e=>{let t={},n=Jr.toBase58();return Object.keys(e).map(r=>{let i=e[r],[o,s]=[i.baseMint.toBase58(),i.quoteMint.toBase58()];t[r]={id:r,version:4,status:i.status.toNumber(),programId:i.programId.toBase58(),mintA:We({address:o,programId:n,decimals:i.baseDecimal.toNumber()}),mintB:We({address:s,programId:n,decimals:i.quoteDecimal.toNumber()}),rewardDefaultInfos:[],rewardDefaultPoolInfos:"Ecosystem",price:i.poolPrice.toNumber(),mintAmountA:new fe(i.mintAAmount.toString()).div(10**i.baseDecimal.toNumber()).toNumber(),mintAmountB:new fe(i.mintBAmount.toString()).div(10**i.quoteDecimal.toNumber()).toNumber(),baseReserve:i.baseReserve,quoteReserve:i.quoteReserve,feeRate:new fe(i.tradeFeeNumerator.toString()).div(i.tradeFeeDenominator.toString()).toNumber(),openTime:i.poolOpenTime.toString(),tvl:0,day:yt,week:yt,month:yt,pooltype:[],farmUpcomingCount:0,farmOngoingCount:0,farmFinishedCount:0,type:"Standard",marketId:i.marketId.toBase58(),configId:sn({programId:i.programId}).toBase58(),lpPrice:0,lpAmount:new fe(i.lpReserve.toString()).div(10**Math.min(i.baseDecimal.toNumber(),i.quoteDecimal.toNumber())).toNumber(),lpMint:We({address:i.lpMint.toBase58(),programId:n,decimals:Math.min(i.baseDecimal.toNumber(),i.quoteDecimal.toNumber())}),burnPercent:0}}),t};export{_m as fetchMultipleInfo,sn as getAssociatedConfigId,$r as getAssociatedOpenOrders,Rm as getAssociatedPoolKeys,ei as getLiquidityAssociatedAuthority,le as getLiquidityAssociatedId,vm as toAmmComputePoolInfo};
//# sourceMappingURL=utils.mjs.map