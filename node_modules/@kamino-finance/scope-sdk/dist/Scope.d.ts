import { Address, GetAccountInfoApi, IAccountMeta, IInstruction, Rpc, SolanaRpcApiMainnet, TransactionSigner } from '@solana/kit';
import Decimal from 'decimal.js';
import { Configuration, OracleMappings, OraclePrices, TokenMetadatas } from './@codegen/scope/accounts';
import { OracleTypeKind } from './@codegen/scope/types';
import { ScopeConfig } from './constants';
import { FeedParam, PricesParam } from './model';
export type ScopeDatedPrice = {
    price: Decimal;
    timestamp: Decimal;
};
export type ProviderKind = 'Pyth' | 'Switchboard' | 'Chainlink' | 'Redstone' | 'Scope';
export declare class ScopeEntryMetadata {
    mappings: OracleMappings;
    metadatas: TokenMetadatas;
    priceId: number;
    constructor(mappings: OracleMappings, metadatas: TokenMetadatas, priceId: number);
    private get priceTypeId();
    private get refPriceId();
    private get generic();
    private get metadata();
    get name(): string;
    get provider(): ProviderKind;
}
export declare class Scope {
    private readonly _rpc;
    private readonly _config;
    /**
     * Create a new instance of the Scope SDK class.
     * @param cluster Name of the Solana cluster
     * @param rpc Connection to the Solana rpc
     */
    constructor(cluster: 'localnet' | 'devnet' | 'mainnet-beta', rpc: Rpc<SolanaRpcApiMainnet>);
    get config(): ScopeConfig;
    private static priceToDecimal;
    /**
     * Get the deserialised OraclePrices account for a single feed
     * @param feed - either the feed PDA seed, configuration account address or OraclePrices account pubkey
     * @returns OraclePrices
     */
    getSingleOraclePrices(feed: PricesParam): Promise<OraclePrices>;
    /**
     * Get the deserialised OraclePrices accounts for the given `OraclePrices` account pubkeys
     * Optimised to filter duplicate keys from the network request but returns the same size response as requested in the same order
     * @throws Error if any of the accounts cannot be fetched
     * @param prices - public keys of the `OraclePrices` accounts
     * @returns [Address, OraclePrices][]
     */
    getOraclePrices(prices: Address[]): Promise<[Address, OraclePrices][]>;
    /**
     * Get the deserialised OraclePrices accounts for the given `OraclePrices` account pubkeys
     * Optimised to filter duplicate keys from the network request but returns the same size response as requested in the same order
     * @throws Error if any of the accounts cannot be fetched
     * @param prices - public keys of the `OraclePrices` accounts
     * @returns [Address, OraclePrices][]
     */
    getMultipleOraclePrices(prices: Address[]): Promise<[Address, OraclePrices][]>;
    getAllOraclePrices(): Promise<[Address, OraclePrices][]>;
    /**
     * Get the deserialised Configuration account for a given feed
     * @param feedParam - either the feed PDA seed or the configuration account address
     * @returns [configuration account address, deserialised configuration]
     */
    getSingleFeedConfiguration(pricesParam: PricesParam): Promise<[Address, Configuration]>;
    /**
     * Get the deserialised Configuration accounts for given feeds
     * @param feedParams - either the feed PDA seed or the configuration account address
     * @returns [configuration account address, deserialised configuration]
     */
    getFeedConfiguration(pricesParams: PricesParam[]): Promise<[Address, Configuration][]>;
    getAllConfigurations(): Promise<[Address, Configuration][]>;
    /**
     * Get the deserialised OracleMappings account for a given feed
     * @param feed - either the feed PDA seed or the configuration account address
     * @returns OracleMappings
     */
    getOracleMappings(feed: FeedParam): Promise<OracleMappings>;
    /**
     * Get the deserialized OracleMappings account for a given feed and config
     * @param feed - either the feed PDA seed or the configuration account address
     * @param config - the configuration account address
     * @param configAccount - the deserialized configuration account
     * @returns OracleMappings
     */
    getOracleMappingsFromConfig(feed: FeedParam, config: Address, configAccount: Configuration): Promise<OracleMappings>;
    /**
     * Get the price of a token from a chain of token prices
     * @param chain
     * @param prices
     */
    static getPriceFromScopeChain(chain: Array<number>, prices: OraclePrices): ScopeDatedPrice;
    /**
     * Verify if the scope chain is valid
     * @param chain
     */
    static isScopeChainValid(chain: Array<number>): boolean;
    /**
     * Get the price of a token from a chain of token prices
     * @param chain
     * @param oraclePrices
     */
    getPriceFromChain(chain: Array<number>, oraclePrices: OraclePrices): Promise<ScopeDatedPrice>;
    static getChainMetadataSync(mappings: OracleMappings, metadatas: TokenMetadatas, chain: number[]): ScopeEntryMetadata[];
    /**
     * Fetch the oracle mapping and metadata information for a chain of token indices
     * @param feed The feed, configuration or prices account describing the scope feed
     * @param chain Token indices describing the scope chain
     */
    getChainMetadata(feed: PricesParam, chain: number[]): Promise<ScopeEntryMetadata[]>;
    /**
     * Create a new scope price feed
     * @param admin
     * @param feed
     */
    initialise(admin: TransactionSigner, feed: string): Promise<[
        IInstruction[],
        TransactionSigner[],
        {
            configuration: Address;
            oracleMappings: Address;
            oraclePrices: Address;
            oracleTwaps: Address;
        }
    ]>;
    /**
     * Update the price mapping of a token
     * @param admin
     * @param feed
     * @param index
     * @param oracleType
     * @param mapping
     * @param twapEnabled
     * @param twapSource
     * @param refPriceIndex
     * @param genericData
     */
    updateFeedMapping(admin: TransactionSigner, feed: string, index: number, oracleType: OracleTypeKind, mapping: Address, twapEnabled?: boolean, twapSource?: number, refPriceIndex?: number, genericData?: Array<number>): Promise<IInstruction>;
    refreshPriceListIx(feed: FeedParam, tokens: number[]): Promise<IInstruction | null>;
    refreshPriceListIxWithAccounts(tokens: number[], configAccount: Configuration, mappings: OracleMappings): Promise<IInstruction | null>;
    static getRefreshAccounts(connection: Rpc<GetAccountInfoApi>, configAccount: Configuration, kaminoProgramId: Address, mappings: OracleMappings, token: number): Promise<IAccountMeta[]>;
    static getJlpRefreshAccounts(rpc: Rpc<GetAccountInfoApi>, configAccount: Configuration, mappings: OracleMappings, token: number, fetchingMechanism: 'compute' | 'scope'): Promise<IAccountMeta[]>;
    static getKTokenRefreshAccounts(connection: Rpc<GetAccountInfoApi>, kaminoProgramId: Address, mappings: OracleMappings, token: number): Promise<IAccountMeta[]>;
}
export default Scope;
//# sourceMappingURL=Scope.d.ts.map